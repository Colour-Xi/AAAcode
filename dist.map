{"version":3,"file":"dist","sources":["src/constants.ts","src/utils.ts","src/roles/Role.ts","src/roles/Harvester.ts","src/roles/Upgrader.ts","src/roles/Builder.ts","src/main.ts"],"sourcesContent":["// 颜色常量\nexport const COLORS = {\n    HARVESTER: '#FFD700', // 金色\n    UPGRADER: '#4169E1',  // 皇家蓝\n    BUILDER: '#32CD32',   //  limegreen\n    REPAIRER: '#FF6347',  // 番茄色\n    CLAIMER: '#9370DB',   // 中紫色\n    SOLDIER: '#FF0000',   // 红色\n};\n\n// 优先级常量\nexport const PRIORITIES = {\n    EMERGENCY: 100,\n    SPAWN: 50,\n    EXTENSION: 45,\n    TOWER: 40,\n    STORAGE: 35,\n    UPGRADE: 30,\n    CONSTRUCTION: 25,\n    REPAIR: 20,\n    HARVEST: 10,\n};\n\n// 角色配置\nexport const ROLE_CONFIG: { [key: string]: { body: BodyPartConstant[], minCount: number, maxCount: number } } = {\n    harvester: {\n        body: [WORK, CARRY, MOVE],\n        minCount: 2,\n        maxCount: 5,\n    },\n    upgrader: {\n        body: [WORK, CARRY, MOVE],\n        minCount: 2,\n        maxCount: 5,\n    },\n    builder: {\n        body: [WORK, CARRY, MOVE],\n        minCount: 1,\n        maxCount: 3,\n    },\n    repairer: {\n        body: [WORK, CARRY, MOVE],\n        minCount: 1,\n        maxCount: 2,\n    },\n    claimer: {\n        body: [CLAIM, MOVE],\n        minCount: 0,\n        maxCount: 1,\n    },\n    soldier: {\n        body: [ATTACK, MOVE],\n        minCount: 0,\n        maxCount: 3,\n    },\n};\n\n// 身体部件成本\nexport const BODY_PART_COST: { [key: string]: number } = {\n    [MOVE]: 50,\n    [WORK]: 100,\n    [CARRY]: 50,\n    [ATTACK]: 80,\n    [RANGED_ATTACK]: 150,\n    [HEAL]: 250,\n    [CLAIM]: 600,\n    [TOUGH]: 10,\n};\n\n// 计算身体成本\nexport function calculateBodyCost(body: BodyPartConstant[]): number {\n    return body.reduce((cost, part) => cost + BODY_PART_COST[part], 0);\n}\n","import { COLORS } from './constants';\n\n/**\n * 生成唯一ID\n * @returns 唯一ID\n */\nexport function getUUID(): number {\n    if (!Memory.uuid) {\n        Memory.uuid = 0;\n    }\n    Memory.uuid++;\n    return Memory.uuid;\n}\n\n/**\n * 日志记录函数\n * @param message 日志消息\n * @param color 日志颜色\n */\nexport function log(message: string, color: string = COLORS.HARVESTER): void {\n    if (Memory.log) {\n        console.log(`<span style=\"color: ${color};\">${message}</span>`);\n    }\n}\n\n/**\n * 获取房间中的能量源\n * @param room 房间对象\n * @returns 能量源数组\n */\nexport function getSources(room: Room): Source[] {\n    return room.find(FIND_SOURCES);\n}\n\n/**\n * 获取房间中的控制器\n * @param room 房间对象\n * @returns 控制器对象\n */\nexport function getController(room: Room): StructureController | undefined {\n    return room.controller;\n}\n\n/**\n * 获取房间中的生成器\n * @param room 房间对象\n * @returns 生成器数组\n */\nexport function getSpawns(room: Room): StructureSpawn[] {\n    return room.find(FIND_MY_SPAWNS);\n}\n\n/**\n * 获取房间中的扩展\n * @param room 房间对象\n * @returns 扩展数组\n */\nexport function getExtensions(room: Room): StructureExtension[] {\n    return room.find(FIND_MY_STRUCTURES, {\n        filter: (structure) => structure.structureType === STRUCTURE_EXTENSION\n    });\n}\n\n/**\n * 获取房间中的建造工地\n * @param room 房间对象\n * @returns 建造工地数组\n */\nexport function getConstructionSites(room: Room): ConstructionSite[] {\n    return room.find(FIND_MY_CONSTRUCTION_SITES);\n}\n\n/**\n * 获取房间中的需要修复的结构\n * @param room 房间对象\n * @returns 需要修复的结构数组\n */\nexport function getDamagedStructures(room: Room): Structure[] {\n    return room.find(FIND_STRUCTURES, {\n        filter: (structure) => structure.hits < structure.hitsMax\n    });\n}\n\n/**\n * 获取房间中的存储\n * @param room 房间对象\n * @returns 存储对象\n */\nexport function getStorage(room: Room): StructureStorage | undefined {\n    return room.storage;\n}\n\n/**\n * 获取房间中的终端\n * @param room 房间对象\n * @returns 终端对象\n */\nexport function getTerminal(room: Room): StructureTerminal | undefined {\n    return room.terminal;\n}\n\n/**\n * 获取房间中的塔\n * @param room 房间对象\n * @returns 塔数组\n */\nexport function getTowers(room: Room): StructureTower[] {\n    return room.find(FIND_MY_STRUCTURES, {\n        filter: (structure) => structure.structureType === STRUCTURE_TOWER\n    });\n}\n\n/**\n * 检查creep是否需要补充能量\n * @param creep creep对象\n * @returns 是否需要补充能量\n */\nexport function needEnergy(creep: Creep): boolean {\n    return creep.store.getFreeCapacity() > 0 && creep.store.getUsedCapacity(RESOURCE_ENERGY) < creep.store.getCapacity();\n}\n\n/**\n * 检查creep是否能量已满\n * @param creep creep对象\n * @returns 是否能量已满\n */\nexport function isEnergyFull(creep: Creep): boolean {\n    return creep.store.getUsedCapacity(RESOURCE_ENERGY) === creep.store.getCapacity();\n}\n\n/**\n * 检查creep是否需要工作\n * @param creep creep对象\n * @returns 是否需要工作\n */\nexport function needWork(creep: Creep): boolean {\n    return creep.store.getUsedCapacity(RESOURCE_ENERGY) > 0;\n}\n\n/**\n * 检查creep是否工作完成\n * @param creep creep对象\n * @returns 是否工作完成\n */\nexport function isWorkDone(creep: Creep): boolean {\n    return creep.store.getUsedCapacity(RESOURCE_ENERGY) === 0;\n}\n","import { log, needEnergy, isEnergyFull, needWork, isWorkDone } from '../utils';\nimport { COLORS } from '../constants';\n\n/**\n * 角色基类\n */\nexport abstract class Role {\n    protected creep: Creep;\n\n    constructor(creep: Creep) {\n        this.creep = creep;\n    }\n\n    /**\n     * 角色运行逻辑\n     */\n    run(): void {\n        // 更新工作状态\n        this.updateWorkingStatus();\n\n        // 执行具体角色逻辑\n        if (this.creep.memory.working) {\n            this.work();\n        } else {\n            this.getEnergy();\n        }\n    }\n\n    /**\n     * 更新工作状态\n     */\n    protected updateWorkingStatus(): void {\n        // 如果正在工作且能量耗尽，切换到获取能量状态\n        if (this.creep.memory.working && isWorkDone(this.creep)) {\n            this.creep.memory.working = false;\n            log(`${this.creep.name}: 能量耗尽，开始获取能量`, COLORS.HARVESTER);\n        }\n        // 如果不在工作且能量已满，切换到工作状态\n        else if (!this.creep.memory.working && isEnergyFull(this.creep)) {\n            this.creep.memory.working = true;\n            log(`${this.creep.name}: 能量已满，开始工作`, COLORS.HARVESTER);\n        }\n    }\n\n    /**\n     * 获取能量\n     */\n    protected abstract getEnergy(): void;\n\n    /**\n     * 执行工作\n     */\n    protected abstract work(): void;\n\n    /**\n     * 移动到目标位置\n     * @param target 目标位置\n     * @returns 是否移动成功\n     */\n    protected moveToTarget(target: RoomPosition | { pos: RoomPosition }, range: number = 1): boolean {\n        const pos = target instanceof RoomPosition ? target : target.pos;\n        \n        // 如果已经在目标范围内，返回true\n        if (this.creep.pos.inRangeTo(pos, range)) {\n            return true;\n        }\n\n        // 尝试移动到目标位置\n        const result = this.creep.moveTo(pos, {\n            visualizePathStyle: {\n                stroke: COLORS.HARVESTER,\n                lineStyle: 'dashed',\n                strokeWidth: 1,\n                opacity: 0.5\n            },\n            reusePath: 5,\n            maxRooms: 1\n        });\n\n        // 处理移动结果\n        switch (result) {\n            case OK:\n                return false;\n            // case ERR_NOT_IN_RANGE:\n            //     log(`${this.creep.name}: 不在目标范围内`, COLORS.HARVESTER);\n            //     return false;\n            case ERR_NO_PATH:\n                log(`${this.creep.name}: 无法找到路径到目标位置`, COLORS.HARVESTER);\n                return false;\n            default:\n                log(`${this.creep.name}: 移动失败，错误代码: ${result}`, COLORS.HARVESTER);\n                return false;\n        }\n    }\n\n    /**\n     * 从能量源获取能量\n     * @param source 能量源\n     * @returns 是否获取成功\n     */\n    protected harvestSource(source: Source): boolean {\n        const result = this.creep.harvest(source);\n        \n        switch (result) {\n            case OK:\n                return true;\n            case ERR_NOT_IN_RANGE:\n                this.moveToTarget(source);\n                return false;\n            case ERR_NOT_ENOUGH_RESOURCES:\n                log(`${this.creep.name}: 能量源已耗尽`, COLORS.HARVESTER);\n                return false;\n            default:\n                log(`${this.creep.name}: 采集能量失败，错误代码: ${result}`, COLORS.HARVESTER);\n                return false;\n        }\n    }\n\n    /**\n     * 从容器获取能量\n     * @param container 容器\n     * @returns 是否获取成功\n     */\n    protected withdrawEnergy(container: StructureContainer | StructureStorage | StructureExtension |StructureTerminal): boolean {\n        if (container.store.getUsedCapacity(RESOURCE_ENERGY) === 0) {\n            log(`${this.creep.name}: 目标容器没有能量`, COLORS.HARVESTER);\n            return false;\n        }\n\n        const result = this.creep.withdraw(container, RESOURCE_ENERGY);\n        \n        switch (result) {\n            case OK:\n                return true;\n            case ERR_NOT_IN_RANGE:\n                this.moveToTarget(container);\n                return false;\n            default:\n                log(`${this.creep.name}: 提取能量失败，错误代码: ${result}`, COLORS.HARVESTER);\n                return false;\n        }\n    }\n\n    /**\n     * 升级控制器\n     * @param controller 控制器\n     * @returns 是否升级成功\n     */\n    protected upgradeController(controller: StructureController): boolean {\n        const result = this.creep.upgradeController(controller);\n        \n        switch (result) {\n            case OK:\n                return true;\n            case ERR_NOT_IN_RANGE:\n                this.moveToTarget(controller);\n                return false;\n            case ERR_NOT_ENOUGH_RESOURCES:\n                log(`${this.creep.name}: 没有足够的能量升级控制器`, COLORS.HARVESTER);\n                return false;\n            default:\n                log(`${this.creep.name}: 升级控制器失败，错误代码: ${result}`, COLORS.HARVESTER);\n                return false;\n        }\n    }\n\n    /**\n     * 建造结构\n     * @param constructionSite 建造工地\n     * @returns 是否建造成功\n     */\n    protected build(constructionSite: ConstructionSite): boolean {\n        const result = this.creep.build(constructionSite);\n        \n        switch (result) {\n            case OK:\n                return true;\n            case ERR_NOT_IN_RANGE:\n                this.moveToTarget(constructionSite);\n                return false;\n            case ERR_NOT_ENOUGH_RESOURCES:\n                log(`${this.creep.name}: 没有足够的能量建造`, COLORS.HARVESTER);\n                return false;\n            default:\n                log(`${this.creep.name}: 建造失败，错误代码: ${result}`, COLORS.HARVESTER);\n                return false;\n        }\n    }\n\n    /**\n     * 修复结构\n     * @param structure 结构\n     * @returns 是否修复成功\n     */\n    protected repair(structure: Structure): boolean {\n        if (structure.hits === structure.hitsMax) {\n            log(`${this.creep.name}: 结构已经完全修复`, COLORS.HARVESTER);\n            return false;\n        }\n\n        const result = this.creep.repair(structure);\n        \n        switch (result) {\n            case OK:\n                return true;\n            case ERR_NOT_IN_RANGE:\n                this.moveToTarget(structure);\n                return false;\n            case ERR_NOT_ENOUGH_RESOURCES:\n                log(`${this.creep.name}: 没有足够的能量修复`, COLORS.HARVESTER);\n                return false;\n            default:\n                log(`${this.creep.name}: 修复失败，错误代码: ${result}`, COLORS.HARVESTER);\n                return false;\n        }\n    }\n\n    /**\n     * 填充结构能量\n     * @param structure 结构\n     * @returns 是否填充成功\n     */\n    protected transferEnergy(structure: StructureSpawn | StructureExtension | StructureTower | StructureStorage | StructureTerminal): boolean {\n        if (structure.store.getFreeCapacity(RESOURCE_ENERGY) === 0) {\n            log(`${this.creep.name}: 目标结构能量已满`, COLORS.HARVESTER);\n            return false;\n        }\n\n        const result = this.creep.transfer(structure, RESOURCE_ENERGY);\n        \n        switch (result) {\n            case OK:\n                return true;\n            case ERR_NOT_IN_RANGE:\n                this.moveToTarget(structure);\n                return false;\n            default:\n                log(`${this.creep.name}: 转移能量失败，错误代码: ${result}`, COLORS.HARVESTER);\n                return false;\n        }\n    }\n}\n","import { Role } from './Role';\nimport { getSources, getSpawns, getExtensions, getStorage, getTerminal } from '../utils';\nimport { COLORS } from '../constants';\n\n/**\n * 采集者角色\n * 负责采集能量并将其转移到生成器、扩展和存储中\n */\nexport class Harvester extends Role {\n    /**\n     * 获取能量\n     */\n    protected getEnergy(): void {\n        // 尝试从存储中获取能量（如果有）\n        const storage = getStorage(this.creep.room);\n        if (storage && storage.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\n            if (this.withdrawEnergy(storage)) {\n                return;\n            }\n        }\n\n        // 尝试从终端中获取能量（如果有）\n        const terminal = getTerminal(this.creep.room);\n        if (terminal && terminal.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\n            if (this.withdrawEnergy(terminal)) {\n                return;\n            }\n        }\n\n        // 从能量源采集能量\n        const sources = getSources(this.creep.room);\n        if (sources.length > 0) {\n            // 如果没有指定能量源，随机选择一个\n            if (!this.creep.memory.sourceId) {\n                this.creep.memory.sourceId = sources[Math.floor(Math.random() * sources.length)].id;\n            }\n\n            const source = Game.getObjectById<Source>(this.creep.memory.sourceId);\n            if (source) {\n                this.harvestSource(source);\n            } else {\n                // 如果能量源不存在，清除记忆\n                delete this.creep.memory.sourceId;\n            }\n        }\n    }\n\n    /**\n     * 执行工作\n     */\n    protected work(): void {\n        // 首先填充生成器和扩展\n        const spawns = getSpawns(this.creep.room);\n        const extensions = getExtensions(this.creep.room);\n        const targets = [...spawns, ...extensions].filter(target => \n            target.store.getFreeCapacity(RESOURCE_ENERGY) > 0\n        );\n\n        if (targets.length > 0) {\n            const target = targets[0];\n            if (this.transferEnergy(target)) {\n                return;\n            }\n        }\n\n        // 如果生成器和扩展都已满，填充存储\n        const storage = getStorage(this.creep.room);\n        if (storage && storage.store.getFreeCapacity(RESOURCE_ENERGY) > 0) {\n            if (this.transferEnergy(storage)) {\n                return;\n            }\n        }\n\n        // 如果存储也已满，填充终端\n        const terminal = getTerminal(this.creep.room);\n        if (terminal && terminal.store.getFreeCapacity(RESOURCE_ENERGY) > 0) {\n            if (this.transferEnergy(terminal)) {\n                return;\n            }\n        }\n\n        // 如果所有目标都已满，升级控制器\n        const controller = this.creep.room.controller;\n        if (controller && controller.my) {\n            this.upgradeController(controller);\n        }\n    }\n}\n","import { Role } from './Role';\nimport { getSources, getSpawns, getExtensions, getStorage, getTerminal } from '../utils';\nimport { COLORS } from '../constants';\n\n/**\n * 升级者角色\n * 负责升级房间控制器\n */\nexport class Upgrader extends Role {\n    /**\n     * 获取能量\n     */\n    protected getEnergy(): void {\n        // 尝试从存储中获取能量（如果有）\n        const storage = getStorage(this.creep.room);\n        if (storage && storage.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\n            if (this.withdrawEnergy(storage)) {\n                return;\n            }\n        }\n\n        // 尝试从终端中获取能量（如果有）\n        const terminal = getTerminal(this.creep.room);\n        if (terminal && terminal.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\n            if (this.withdrawEnergy(terminal)) {\n                return;\n            }\n        }\n\n        // 尝试从生成器和扩展中获取能量\n        // const spawns = getSpawns(this.creep.room);\n        // const extensions = getExtensions(this.creep.room);\n        // const targets = [...spawns, ...extensions].filter(target => \n        //     target.store.getUsedCapacity(RESOURCE_ENERGY) > 0\n        // );\n\n        // if (targets.length > 0) {\n        //     const target = targets[0];\n        //     if (this.withdrawEnergy(target)) {\n        //         return;\n        //     }\n        // }\n\n        // 从能量源采集能量\n        const sources = getSources(this.creep.room);\n        if (sources.length > 0) {\n            // 如果没有指定能量源，随机选择一个\n            if (!this.creep.memory.sourceId) {\n                this.creep.memory.sourceId = sources[Math.floor(Math.random() * sources.length)].id;\n            }\n\n            const source = Game.getObjectById<Source>(this.creep.memory.sourceId);\n            if (source) {\n                this.harvestSource(source);\n            } else {\n                // 如果能量源不存在，清除记忆\n                delete this.creep.memory.sourceId;\n            }\n        }\n    }\n\n    /**\n     * 执行工作\n     */\n    protected work(): void {\n        // 升级控制器\n        const controller = this.creep.room.controller;\n        if (controller && controller.my) {\n            this.upgradeController(controller);\n        }\n    }\n}\n","import { Role } from './Role';\nimport { getSources, getSpawns, getExtensions, getStorage, getTerminal, getConstructionSites, getDamagedStructures } from '../utils';\nimport { COLORS } from '../constants';\n\n/**\n * 建造者角色\n * 负责建造新结构和修复受损结构\n */\nexport class Builder extends Role {\n    /**\n     * 获取能量\n     */\n    protected getEnergy(): void {\n        // 尝试从存储中获取能量（如果有）\n        const storage = getStorage(this.creep.room);\n        if (storage && storage.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\n            if (this.withdrawEnergy(storage)) {\n                return;\n            }\n        }\n\n        // 尝试从终端中获取能量（如果有）\n        const terminal = getTerminal(this.creep.room);\n        if (terminal && terminal.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\n            if (this.withdrawEnergy(terminal)) {\n                return;\n            }\n        }\n\n        // 尝试从生成器和扩展中获取能量\n        // const spawns = getSpawns(this.creep.room);\n        // const extensions = getExtensions(this.creep.room);\n        // const targets = [...spawns, ...extensions].filter(target => \n        //     target.store.getUsedCapacity(RESOURCE_ENERGY) > 0\n        // );\n\n        // if (targets.length > 0) {\n        //     const target = targets[0];\n        //     if (this.withdrawEnergy(target)) {\n        //         return;\n        //     }\n        // }\n\n        // 从能量源采集能量\n        const sources = getSources(this.creep.room);\n        if (sources.length > 0) {\n            // 如果没有指定能量源，随机选择一个\n            if (!this.creep.memory.sourceId) {\n                this.creep.memory.sourceId = sources[Math.floor(Math.random() * sources.length)].id;\n            }\n\n            const source = Game.getObjectById<Source>(this.creep.memory.sourceId);\n            if (source) {\n                this.harvestSource(source);\n            } else {\n                // 如果能量源不存在，清除记忆\n                delete this.creep.memory.sourceId;\n            }\n        }\n    }\n\n    /**\n     * 执行工作\n     */\n    protected work(): void {\n        // 首先建造新结构\n        const constructionSites = getConstructionSites(this.creep.room);\n        if (constructionSites.length > 0) {\n            // 如果没有指定建造目标，选择第一个\n            if (!this.creep.memory.targetId) {\n                this.creep.memory.targetId = constructionSites[0].id;\n            }\n\n            const target = Game.getObjectById<ConstructionSite>(this.creep.memory.targetId);\n            if (target) {\n                this.build(target);\n            } else {\n                // 如果建造目标不存在，清除记忆\n                delete this.creep.memory.targetId;\n            }\n            return;\n        }\n\n        // 如果没有建造任务，修复受损结构\n        const damagedStructures = getDamagedStructures(this.creep.room);\n        if (damagedStructures.length > 0) {\n            // 优先修复墙和 rampart\n            const walls = damagedStructures.filter(s => s.structureType === STRUCTURE_WALL || s.structureType === STRUCTURE_RAMPART);\n            const otherStructures = damagedStructures.filter(s => s.structureType !== STRUCTURE_WALL && s.structureType !== STRUCTURE_RAMPART);\n\n            // 如果有其他结构需要修复，优先修复它们（除了墙和 rampart）\n            if (otherStructures.length > 0) {\n                // 按受损程度排序\n                otherStructures.sort((a, b) => (a.hits / a.hitsMax) - (b.hits / b.hitsMax));\n                this.repair(otherStructures[0]);\n            }\n            // 如果只有墙和 rampart 需要修复，修复受损最严重的\n            else if (walls.length > 0) {\n                // 按受损程度排序\n                walls.sort((a, b) => (a.hits / a.hitsMax) - (b.hits / b.hitsMax));\n                // 只修复生命值低于 1000 的墙和 rampart\n                if (walls[0].hits < 1000) {\n                    this.repair(walls[0]);\n                } else {\n                    // 如果墙和 rampart 生命值都很高，升级控制器\n                    const controller = this.creep.room.controller;\n                    if (controller && controller.my) {\n                        this.upgradeController(controller);\n                    }\n                }\n            }\n            return;\n        }\n\n        // 如果没有建造或修复任务，升级控制器\n        const controller = this.creep.room.controller;\n        if (controller && controller.my) {\n            this.upgradeController(controller);\n        }\n    }\n}\n","import { Harvester } from './roles/Harvester';\nimport { Upgrader } from './roles/Upgrader';\nimport { Builder } from './roles/Builder';\nimport { getSources, getSpawns, getController, getUUID, log } from './utils';\nimport { ROLE_CONFIG, COLORS, calculateBodyCost } from './constants';\n\n/**\n * Screeps TypeScript AI 主入口文件\n */\n\n// 设置全局内存默认值\nMemory.uuid = Memory.uuid || 0;\nMemory.log = Memory.log || false;\n\n/**\n * 游戏主循环\n */\nexport function loop(): void {\n    // 清理内存中已死亡的creep\n    cleanupMemory();\n\n    // 初始化所有房间\n    initRooms();\n\n    // 为每个房间运行逻辑\n    for (const roomName in Game.rooms) {\n        const room = Game.rooms[roomName];\n        runRoom(room);\n    }\n}\n\n/**\n * 清理内存中已死亡的creep\n */\nfunction cleanupMemory(): void {\n    for (const name in Memory.creeps) {\n        if (!Game.creeps[name]) {\n            log(`清理内存中的creep: ${name}`, COLORS.HARVESTER);\n            delete Memory.creeps[name];\n        }\n    }\n}\n\n/**\n * 初始化所有房间\n */\nfunction initRooms(): void {\n    for (const roomName in Game.rooms) {\n        const room = Game.rooms[roomName];\n        \n        // 如果房间内存未初始化，则初始化\n        if (!room.memory.sources) {\n            room.memory.sources = [];\n            const sources = getSources(room);\n            for (const source of sources) {\n                room.memory.sources.push({ id: source.id });\n            }\n        }\n\n        if (!room.memory.spawns) {\n            room.memory.spawns = [];\n            const spawns = getSpawns(room);\n            for (const spawn of spawns) {\n                room.memory.spawns.push(spawn.id);\n            }\n        }\n\n        if (!room.memory.controllers) {\n            room.memory.controllers = [];\n            const controller = getController(room);\n            if (controller) {\n                room.memory.controllers.push(controller.id);\n            }\n        }\n    }\n}\n\n/**\n * 运行单个房间的逻辑\n * @param room 房间对象\n */\nfunction runRoom(room: Room): void {\n    // 如果房间不是自己的，跳过\n    if (!room.controller || !room.controller.my) {\n        return;\n    }\n\n    // 统计当前每个角色的数量\n    const roleCounts = countRoles(room);\n\n    // 管理spawn\n    manageSpawns(room, roleCounts);\n\n    // 运行所有creep\n    runCreeps(room);\n}\n\n/**\n * 统计房间中每个角色的数量\n * @param room 房间对象\n * @returns 角色数量统计\n */\nfunction countRoles(room: Room): { [key: string]: number } {\n    const counts: { [key: string]: number } = {};\n    \n    // 初始化所有角色类型的计数为0\n    for (const role in ROLE_CONFIG) {\n        counts[role] = 0;\n    }\n\n    // 统计每个角色的数量\n    for (const name in Game.creeps) {\n        const creep = Game.creeps[name];\n        if (creep.room.name === room.name && creep.memory.role) {\n            counts[creep.memory.role]++;\n        }\n    }\n\n    return counts;\n}\n\n/**\n * 管理房间中的spawn\n * @param room 房间对象\n * @param roleCounts 当前角色数量统计\n */\nfunction manageSpawns(room: Room, roleCounts: { [key: string]: number }): void {\n    const spawns = getSpawns(room);\n    \n    // 如果没有spawn，跳过\n    if (spawns.length === 0) {\n        return;\n    }\n\n    // 选择第一个空闲的spawn\n    let spawn: StructureSpawn | undefined;\n    for (const s of spawns) {\n        if (!s.spawning) {\n            spawn = s;\n            break;\n        }\n    }\n\n    // 如果没有空闲的spawn，显示正在生成的creep信息\n    if (!spawn) {\n        for (const s of spawns) {\n            if (s.spawning) {\n                const spawningCreep = Game.creeps[s.spawning.name];\n                s.room.visual.text(\n                    `生成中: ${spawningCreep.memory.role}`,\n                    s.pos.x + 1,\n                    s.pos.y,\n                    { align: 'left', opacity: 0.8 }\n                );\n            }\n        }\n        return;\n    }\n\n    // 确定需要生成的角色\n    const roleToSpawn = determineRoleToSpawn(room, roleCounts);\n    if (roleToSpawn) {\n        spawnCreep(spawn, roleToSpawn);\n    }\n}\n\n/**\n * 确定需要生成的角色\n * @param room 房间对象\n * @param roleCounts 当前角色数量统计\n * @returns 需要生成的角色类型，或null\n */\nfunction determineRoleToSpawn(room: Room, roleCounts: { [key: string]: number }): string | null {\n    // 检查每个角色是否需要生成\n    for (const role in ROLE_CONFIG) {\n        const config = ROLE_CONFIG[role];\n        if (roleCounts[role] < config.minCount) {\n            log(`房间 ${room.name} 需要生成 ${role}，当前数量: ${roleCounts[role]}/${config.minCount}`, COLORS.HARVESTER);\n            return role;\n        }\n    }\n\n    // 如果所有角色都达到最小数量，检查是否需要补充\n    for (const role in ROLE_CONFIG) {\n        const config = ROLE_CONFIG[role];\n        if (roleCounts[role] < config.maxCount) {\n            // 根据房间能量确定是否生成更多的该角色\n            const bodyCost = calculateBodyCost(config.body);\n            if (room.energyAvailable >= bodyCost) {\n                log(`房间 ${room.name} 可以生成更多 ${role}，当前数量: ${roleCounts[role]}/${config.maxCount}`, COLORS.HARVESTER);\n                return role;\n            }\n        }\n    }\n\n    return null;\n}\n\n/**\n * 生成creep\n * @param spawn spawn对象\n * @param role 角色类型\n */\nfunction spawnCreep(spawn: StructureSpawn, role: string): void {\n    const config = ROLE_CONFIG[role];\n    const body = config.body;\n    const bodyCost = calculateBodyCost(body);\n\n    // 检查能量是否足够\n    if (spawn.room.energyAvailable < bodyCost) {\n        log(`能量不足，无法生成 ${role}，需要 ${bodyCost} 能量，当前 ${spawn.room.energyAvailable}`, COLORS.HARVESTER);\n        return;\n    }\n\n    // 生成creep名称\n    const creepName = `${role}-${getUUID()}`;\n\n    // 设置creep内存\n    const memory: CreepMemory = {\n        role: role,\n        room: spawn.room.name,\n        working: false\n    };\n\n    // 生成creep\n    const result = spawn.spawnCreep(body, creepName, { memory: memory });\n\n    // 处理生成结果\n    switch (result) {\n        case OK:\n            log(`开始生成creep: ${creepName} (${role})`, COLORS.HARVESTER);\n            break;\n        case ERR_NAME_EXISTS:\n            log(`creep名称 ${creepName} 已存在`, COLORS.HARVESTER);\n            break;\n        case ERR_BUSY:\n            log(`Spawn ${spawn.name} 正忙`, COLORS.HARVESTER);\n            break;\n        case ERR_NOT_ENOUGH_ENERGY:\n            log(`能量不足，无法生成 ${role}`, COLORS.HARVESTER);\n            break;\n        case ERR_INVALID_ARGS:\n            log(`生成 ${role} 参数无效`, COLORS.HARVESTER);\n            break;\n        default:\n            log(`生成 ${role} 失败，错误代码: ${result}`, COLORS.HARVESTER);\n            break;\n    }\n}\n\n/**\n * 运行房间中的所有creep\n * @param room 房间对象\n */\nfunction runCreeps(room: Room): void {\n    for (const name in Game.creeps) {\n        const creep = Game.creeps[name];\n        \n        // 只运行当前房间的creep\n        if (creep.room.name !== room.name) {\n            continue;\n        }\n\n        // 根据角色运行不同的逻辑\n        switch (creep.memory.role) {\n            case 'harvester':\n                new Harvester(creep).run();\n                break;\n            case 'upgrader':\n                new Upgrader(creep).run();\n                break;\n            case 'builder':\n                new Builder(creep).run();\n                break;\n            default:\n                log(`未知角色: ${creep.memory.role}，creep: ${creep.name}`, COLORS.HARVESTER);\n                break;\n        }\n    }\n}\n"],"names":[],"mappings":"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"}